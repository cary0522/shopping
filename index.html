<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="shopping.css">
    <script src="https://kit.fontawesome.com/5292bd8fe4.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>Document</title>
</head>

<body>
    <nav class="container-fluid d-flex justify-content-between p-3 position-relative nav">
        <input type="checkbox" id="bars" class="burger">
        <div class="burger_item position-absolute d-flex justify-content-evenly">
            <a href="https://cary0522.github.io/front/" class="text-success">首頁</a>
            <a href="https://cary0522.github.io/RWD2/" class="text-success">甜點</a>
            <a href="https://cary0522.github.io/login/" class="text-success">登入</a>
        </div>
        <label for="bars" class="bars_btn">
            <i class="fa-solid fa-bars text-success"></i>
        </label>
        <div class="logo text-success">
            <i class="fa-solid fa-h"></i>
            <i class="fa-solid fa-s"></i>
            <i class="fa-solid fa-u"></i>
        </div>
        <div class="shopping_car text-success">
            <i class="fa-solid fa-cart-shopping"></i>
        </div>
    </nav>
    <div class="container-fluid shopping d-sm-flex">
        <div class="col-sm-8">
            <div class="container-fluid bg-success bg-opacity-10">
                <h4 class="text-success text-center p-2 m-3">您的購物車</h4>
            </div>
            <div class="container-fluid d-flex text-success my-3">
                <div class="container-fluid d-flex flex-wrap justify-content-center" id="shoppingItem">
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="orderSummary">
                <div class="bg-success bg-opacity-10 m-3">
                    <h4 class="text-success text-center p-2 orderSummaryText">訂單摘要</h4>
                </div>
                <div class="d-flex text-success">
                    <div class="col-6 px-3">
                        <p>小計</p>
                    </div>
                    <div class="col-3 text-end mx-1">
                        <p>NT$</p>
                    </div>
                    <div class="col-3 text-left">
                        <p id="totalPriceTwo"></p>
                    </div>
                </div>
                <div class="d-flex text-success">
                    <div class="col-6 px-3">
                        <p>運費</p>
                    </div>
                    <div class="col-3 text-end mx-1">
                        <p>NT$</p>
                    </div>
                    <div class="col-3 text-left">
                        <p id="freight">60</p>
                    </div>
                </div>
                <div class="d-flex text-success fs-2">
                    <div class="col-6 px-3">
                        <p>總計</p>
                    </div>
                    <div class="col-3 text-end mx-1">
                        <p>NT$</p>
                    </div>
                    <div class="col-3 text-left">
                        <p id="allPrice"></p>
                    </div>
                </div>
            </div>
            <div class="container-fluid bg-warning text-center text-success bg-opacity-50">
                <button class="btn fs-4 text-success">結帳</button>
            </div>
        </div>
    </div>
    <div class="container-fluid my-5">
        <div class="container-fluid bg-success d-flex flex-wrap flex-sm-nowrap justify-content-center py-3 ">
            <div
                class="justify-content-center d-flex justify-content-center text-white col-12 col-sm-6 align-items-sm-center">
                <i class="fa-solid fa-s m-2 py-1"></i>
                <span class="m-2">訂閱你我的甜蜜郵件</span>
            </div>
            <div class="input-group d-flex justify-content-center w-50 text-white m-2">
                <i class="fa-regular fa-envelope input-group-text py-2 text-success"></i>
                <input type="text" class="form-control" placeholder="email">
                <button class="btn btn-warning text-white input-group-text">
                    <i class="fa-solid fa-arrow-right text-success"></i>
                </button>
            </div>
        </div>
        <div class="footer bg-success bg-opacity-10 text-success position-relative">
            <div class="container-fluid p-3">
                <div class="m-3">
                    <i class="fa-solid fa-h"></i>
                    <i class="fa-solid fa-s"></i>
                    <i class="fa-solid fa-u"></i>
                </div>
                <div class="m-3">
                    <span>cary0522@gmail.com</span>
                </div>
                <div class="m-3">
                    <a href="https://www.facebook.com/">
                        <i class="fa-brands fa-facebook text-success"></i></a>
                    <a href="https://www.instagram.com/?hl=zh-tw">
                        <i class="fa-brands fa-instagram text-success"></i></a>
                </div>
                <div class="date m-3 mx-5">
                    <div>
                        <span>今天是個————</span>
                    </div>
                    <div class="my-3">
                        <span>吃甜點的好日子。</span>
                    </div>
                </div>
                <div class="m-3 year">
                    <span>@2024</span>
                </div>
            </div>
        </div>
    </div>
    <script>
        let productOne = {
            name: "sweet",
            price: 40,
            image: "https://picsum.photos/id/201/200/200"
        }

        let productTwo = {
            name: "butter",
            price: 40,
            image: "https://picsum.photos/id/206/200/200"
        }

        let productThree = {
            name: "banana",
            price: 10,
            image: "https://picsum.photos/id/209/200/200"
        }

        let products = [];
        products.push(productOne);
        products.push(productTwo);
        products.push(productThree);

        for (i = 0; i < products.length; i++) {
            let shoppingItem = document.querySelector("#shoppingItem");
            let newDiv = document.createElement("div");
            newDiv.innerHTML = `
            <div class="d-flex m-3">
            <div class="col-6 col-sm-4">
                <img src='${products[i].image}' alt='' >
            </div>
            <div class="col-6 col-sm-8 d-sm-flex align-items-sm-center">
            <div class="m-2 d-sm-flex">
                <p class="p-0 m-0"> ${products[i].name} </p>
                <div class="d-flex">
                    <p class="p-0 m-0 perPrice"> ${products[i].price} </p>
                    <p class="p-0 m-0">$</p>
                </div>
            </div>
            <div class="input-group my-3">
                <button onclick="decrement(this)"class="btn input-group-text border-secondary-subtle btnMinus"id="btnMinus${i}">
                    <i class="fa-solid fa-minus text-success"></i>
                </button>
                <input type="text" class="form-control text-success goods" value="1" id="goods${i}">
                <button onclick="increment(this)"class="btn input-group-text border-secondary-subtle btnPlus" id="btnPlus${i}">
                    <i class="fa-solid fa-plus text-success"></i>
                </button>
            </div>
            <div class="trash">
                <button onclick="zero(this)" class="btn">
                    <i class="fa-solid fa-trash text-success"></i></button>
            </div>
            <div class="col-12 d-flex justify-content-end border-top border-bottom border-secondary-subtle my-2">
                <p class="py-2 m-0">NT$</p>
                <p class="py-2 m-0 totalPrice" id="totalPrice${i}"> ${products[i].price} </p>
            </div>
        </div>
        </div>
            `
            shoppingItem.appendChild(newDiv);
        }


        let totalPriceTwo = document.querySelector("#totalPriceTwo");
        let freight = document.querySelector("#freight");
        let allPrice = document.querySelector("#allPrice");

        totalPriceTwo.textContent = productOne.price + productTwo.price + productThree.price;
        allPrice.textContent = parseInt(totalPriceTwo.textContent) + parseInt(freight.textContent);

        function decrement(e) {
            console.log(e.id);
            for (var x = 0; x < products.length; x++) {
                if (e.id == `btnMinus${x}`) {
                    let goods = document.querySelector(`#goods${x}`);
                    let currentValue = parseInt(goods.value);
                    if (currentValue > 0) {
                        goods.value = currentValue - 1;
                    }
                    let currentValueN = parseInt(goods.value);
                    let totalPrice = document.querySelector(`#totalPrice${x}`);
                    totalPrice.textContent = currentValueN * products[x].price;
                }

                let totalPriceSum = 0;
                for (var t = 0; t < products.length; t++) {
                    let totalPrice = document.querySelector(`#totalPrice${t}`);
                    let totalPriceNum = parseInt(totalPrice.textContent);
                    totalPriceSum += totalPriceNum;
                }
                totalPriceTwo.textContent = totalPriceSum;
                let totalPriceTwoNum = parseInt(totalPriceTwo.textContent);
                let freightNum = parseInt(freight.textContent);
                allPrice.textContent = totalPriceTwoNum + freightNum;
            }
        }

        function increment(e) {
            console.log(e.id);
            for (var y = 0; y < products.length; y++) {
                if (e.id == `btnPlus${y}`) {
                    let goods = document.querySelector(`#goods${y}`);
                    let currentValue = parseInt(goods.value);
                    goods.value = currentValue + 1;
                    let currentValueN = parseInt(goods.value);
                    let totalPrice = document.querySelector(`#totalPrice${y}`);
                    totalPrice.textContent = currentValueN * products[y].price;
                }
            }
            let totalPriceSum = 0;
            for (var t = 0; t < products.length; t++) {
                let totalPrice = document.querySelector(`#totalPrice${t}`);
                let totalPriceNum = parseInt(totalPrice.textContent);
                totalPriceSum += totalPriceNum;
            }
            totalPriceTwo.textContent = totalPriceSum;
                let totalPriceTwoNum = parseInt(totalPriceTwo.textContent);
                let freightNum = parseInt(freight.textContent);
                allPrice.textContent = totalPriceTwoNum + freightNum;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">

    </script>
</body>

</html>